{"version":3,"file":"bundle.js","sources":["../src/index.ts"],"sourcesContent":["import { MessageBot, Player } from '@bhmb/bot'\nimport { UIExtensionExports } from '@bhmb/ui'\n\ninterface KeyedObject {\n  [key: string]: any\n}\n\ninterface Warns {\n  [key: string]: number\n}\n\nfunction mergeByType<T extends KeyedObject>(target: T, extra: Partial<T>): T {\n  Object.keys(extra).forEach(key => {\n    if (typeof extra[key] == typeof target[key]) {\n      target[key] = extra[key]\n    }\n  })\n  return target\n}\n\ninterface Settings {\n  'threshold-ban': number\n  'warn-kick': boolean\n  'response-warn': string\n  'response-warn-ban': string\n  'response-warnlevel': string\n  'response-set-warnings': string\n  'response-unwarn': string\n}\n\ninterface SettingsLabel extends HTMLLabelElement {\n  dataset: {\n    settingId: keyof Settings\n  }\n}\n\nimport commandsHtml from './commandsTab.html'\nimport settingsHtml from './settingsTab.html'\nimport logHtml from './logTab.html'\n\nconst warningsKey = 'warns'\nconst logKey = 'log'\nconst settingsKey = 'settings'\nconst commands = ['warn', 'unwarn', 'warnlevel', 'set-warnings']\n\nMessageBot.registerExtension('bibliofile/warnings', (ex, world) => {\n  const getWarnings = () => ex.storage.get<Warns>(warningsKey, {})\n  const getLog = () => ex.storage.get<string[]>(logKey, [])\n  const getSettings = () => mergeByType<Settings>({\n    'threshold-ban': 5,\n    'warn-kick': true,\n    'response-warn': '{{Name}}, you have been warned for breaking the rules. Please behave yourself. If warned {{left}} more time(s) you will be banned.',\n    'response-warn-ban': '{{Name}} has been banned after multiple warnings.',\n    'response-warnlevel': 'Warnings for {{Name}}: {{amount}}',\n    'response-set-warnings': '{{Name}} set {{Target}}\\'s warnings to {{amount}}.',\n    'response-unwarn': 'Warning removed from {{Name}}, {{Name}} now has {{left}} warnings.'\n  }, ex.storage.get<Partial<Settings>>(settingsKey, {}))\n\n  // Allow overrides\n  let logMessage = (message: string) => ex.storage.set('log', getLog().concat([message]))\n\n  const canWarn = (player: Player) => !player.isStaff\n  const getWarns = (player: Player) => getWarnings()[player.name] || 0\n\n  world.addCommand('warn', (player, args) => {\n    let target = world.getPlayer(args)\n    if (!canWarn(target) || !player.isStaff) return\n\n    let settings = getSettings()\n    logMessage(`${player.name} warned ${args}`)\n\n    ex.storage.with<Warns>(warningsKey, {}, warnings => {\n      warnings[target.name] = (warnings[target.name] || 0) + 1\n    })\n    let warnings = getWarns(target)\n\n    // What message to send?\n    if (warnings > settings['threshold-ban']) {\n      ex.bot.send(settings['response-warn-ban'], { name: target.name })\n      ex.bot.send(`/ban ${target.name}`)\n      logMessage(`Banning ${target.name}. Exceeded ban threshold`)\n    } else {\n      ex.bot.send(settings['response-warn'], {\n        left: (settings['threshold-ban'] - warnings).toString(),\n        name: target.name\n      })\n\n      if (settings['warn-kick']) ex.bot.send(`/kick ${target.name}`)\n    }\n  })\n\n  world.addCommand('unwarn', (player, args) => {\n    let target = world.getPlayer(args)\n    if (!canWarn(target) || !player.isStaff) return\n\n    logMessage(`${player.name} unwarned ${target.name}`)\n    ex.storage.with<Warns>(warningsKey, {}, warns => {\n      warns[target.name] = warns[target.name] > 0 ? warns[target.name] - 1 : 0\n    })\n\n    ex.bot.send(getSettings()['response-unwarn'], {\n      left: getWarns(target) + '',\n      name: target.name\n    })\n  })\n\n  world.addCommand('warnlevel', (player, args) => {\n    let name = player.name\n    if (args && player.isStaff) name = args\n\n    ex.bot.send(getSettings()['response-warnlevel'], {\n      name,\n      amount: getWarns(world.getPlayer(name)) + ''\n    })\n  })\n\n  world.addCommand('set-warnings', (player, args) => {\n    if (!player.isAdmin) return\n\n    let amount = +args.substring(0, args.indexOf(' '))\n    if (Number.isNaN(amount)) return\n\n    let target = world.getPlayer(args.substring(args.indexOf(' ') + 1))\n    if (!canWarn(target)) return\n\n    ex.storage.with<Warns>(warningsKey, {}, warns => {\n      warns[target.name] = amount\n    })\n\n    let settings = getSettings()\n    ex.bot.send(settings['response-set-warnings'], {\n      Target: target.name[0] + target.name.slice(1).toLocaleLowerCase(),\n      TARGET: target.name,\n      target: target.name.toLocaleLowerCase(),\n      amount: '' + amount,\n      name: player.name\n    })\n    logMessage(`${player.name} set ${target.name}'s warnings to ${amount}`)\n\n    if (getWarns(target) > settings['threshold-ban']) {\n      ex.bot.send(settings['response-warn-ban'], { name: target.name })\n      ex.bot.send(`/ban ${target.name}`)\n      logMessage(`Banning ${target.name}. Exceeded ban threshold`)\n    }\n  })\n\n  ex.remove = () => commands.forEach(command => world.removeCommand(command))\n\n  // Browser only\n  const ui = ex.bot.getExports('ui') as UIExtensionExports | undefined\n  if (!ui) return\n\n  // Create tabs\n  ui.addTabGroup('Warnings', 'warnings')\n  let commandsTab = ui.addTab('Commands', 'warnings')\n  commandsTab.innerHTML = commandsHtml\n  let settingsTab = ui.addTab('Settings', 'warnings')\n  settingsTab.innerHTML = settingsHtml\n  let logTab = ui.addTab('Log', 'warnings')\n  logTab.innerHTML = logHtml\n\n  // Init settings\n  settingsTab.querySelectorAll('label').forEach((label: SettingsLabel) => {\n    // Just work... not sure how to type this.\n    let input = label.querySelector('input') as any\n    let settings = getSettings()\n\n    switch (input.type) {\n      case 'checkbox':\n        input.checked = settings[label.dataset.settingId] || false\n        break\n      case 'number':\n        input.value = settings[label.dataset.settingId] || 0\n        break\n      default:\n        input.value = settings[label.dataset.settingId] || ''\n    }\n  })\n\n  // Save on change\n  settingsTab.addEventListener('change', function () {\n    var settings: Partial<Settings> = {}\n    settingsTab.querySelectorAll('label').forEach((label: SettingsLabel) => {\n      var input = label.querySelector('input') as any\n      switch (input.type) {\n        case 'checkbox':\n          settings[label.dataset.settingId] = input.checked\n          break\n        case 'number':\n          settings[label.dataset.settingId] = +input.value\n          break\n        default:\n          settings[label.dataset.settingId] = input.value\n      }\n    })\n    ex.storage.set('settings', settings)\n  })\n\n  // Init log\n  getLog().forEach(function (line) {\n    var el = document.createElement('li')\n    el.textContent = line\n    ;(logTab.querySelector('ul') as HTMLElement).appendChild(el)\n  })\n\n  logMessage = (function (orig) {\n    return (message: string) => {\n      orig(message)\n      let el = document.createElement('li')\n      el.textContent = message\n      ;(logTab.querySelector('ul') as HTMLElement).appendChild(el)\n    }\n  })(logMessage)\n\n  ;(logTab.querySelector('a') as HTMLElement).addEventListener('click', () => {\n    ui.alert('Are you sure you want to clear the logs? This cannot be undone.', [\n      { text: 'Yes', style: 'is-danger' },\n      { text: 'Cancel' }\n    ], response => {\n      if (response == 'Yes') {\n        ex.storage.set('log', [])\n        ;(logTab.querySelector('ul') as HTMLElement).innerHTML = ''\n      }\n    })\n  })\n\n  ex.remove = (function(orig) {\n    return () => {\n      orig()\n      ui.removeTabGroup('warnings')\n    }\n  })(ex.remove)\n})\n"],"names":["MessageBot"],"mappings":";;;;;;;;;;;;AAWA,qBAA4C,MAAS,EAAE,KAAiB;IACtE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,GAAG;QAC5B,IAAI,OAAO,KAAK,CAAC,GAAG,CAAC,IAAI,OAAO,MAAM,CAAC,GAAG,CAAC,EAAE;YAC3C,MAAM,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,CAAA;SACzB;KACF,CAAC,CAAA;IACF,OAAO,MAAM,CAAA;CACd;AAkBD,AAIA,MAAM,WAAW,GAAG,OAAO,CAAA;AAC3B,MAAM,MAAM,GAAG,KAAK,CAAA;AACpB,MAAM,WAAW,GAAG,UAAU,CAAA;AAC9B,MAAM,QAAQ,GAAG,CAAC,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,cAAc,CAAC,CAAA;AAEhEA,cAAU,CAAC,iBAAiB,CAAC,qBAAqB,EAAE,CAAC,EAAE,EAAE,KAAK;IAC5D,MAAM,WAAW,GAAG,MAAM,EAAE,CAAC,OAAO,CAAC,GAAG,CAAQ,WAAW,EAAE,EAAE,CAAC,CAAA;IAChE,MAAM,MAAM,GAAG,MAAM,EAAE,CAAC,OAAO,CAAC,GAAG,CAAW,MAAM,EAAE,EAAE,CAAC,CAAA;IACzD,MAAM,WAAW,GAAG,MAAM,WAAW,CAAW;QAC9C,eAAe,EAAE,CAAC;QAClB,WAAW,EAAE,IAAI;QACjB,eAAe,EAAE,oIAAoI;QACrJ,mBAAmB,EAAE,mDAAmD;QACxE,oBAAoB,EAAE,mCAAmC;QACzD,uBAAuB,EAAE,oDAAoD;QAC7E,iBAAiB,EAAE,oEAAoE;KACxF,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAoB,WAAW,EAAE,EAAE,CAAC,CAAC,CAAA;;IAGtD,IAAI,UAAU,GAAG,CAAC,OAAe,KAAK,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,MAAM,EAAE,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAA;IAEvF,MAAM,OAAO,GAAG,CAAC,MAAc,KAAK,CAAC,MAAM,CAAC,OAAO,CAAA;IACnD,MAAM,QAAQ,GAAG,CAAC,MAAc,KAAK,WAAW,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;IAEpE,KAAK,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,MAAM,EAAE,IAAI;QACpC,IAAI,MAAM,GAAG,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;QAClC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO;YAAE,OAAM;QAE/C,IAAI,QAAQ,GAAG,WAAW,EAAE,CAAA;QAC5B,UAAU,CAAC,GAAG,MAAM,CAAC,IAAI,WAAW,IAAI,EAAE,CAAC,CAAA;QAE3C,EAAE,CAAC,OAAO,CAAC,IAAI,CAAQ,WAAW,EAAE,EAAE,EAAE,QAAQ;YAC9C,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;SACzD,CAAC,CAAA;QACF,IAAI,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAA;;QAG/B,IAAI,QAAQ,GAAG,QAAQ,CAAC,eAAe,CAAC,EAAE;YACxC,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC,CAAA;YACjE,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,MAAM,CAAC,IAAI,EAAE,CAAC,CAAA;YAClC,UAAU,CAAC,WAAW,MAAM,CAAC,IAAI,0BAA0B,CAAC,CAAA;SAC7D;aAAM;YACL,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,EAAE;gBACrC,IAAI,EAAE,CAAC,QAAQ,CAAC,eAAe,CAAC,GAAG,QAAQ,EAAE,QAAQ,EAAE;gBACvD,IAAI,EAAE,MAAM,CAAC,IAAI;aAClB,CAAC,CAAA;YAEF,IAAI,QAAQ,CAAC,WAAW,CAAC;gBAAE,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,MAAM,CAAC,IAAI,EAAE,CAAC,CAAA;SAC/D;KACF,CAAC,CAAA;IAEF,KAAK,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC,MAAM,EAAE,IAAI;QACtC,IAAI,MAAM,GAAG,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;QAClC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO;YAAE,OAAM;QAE/C,UAAU,CAAC,GAAG,MAAM,CAAC,IAAI,aAAa,MAAM,CAAC,IAAI,EAAE,CAAC,CAAA;QACpD,EAAE,CAAC,OAAO,CAAC,IAAI,CAAQ,WAAW,EAAE,EAAE,EAAE,KAAK;YAC3C,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;SACzE,CAAC,CAAA;QAEF,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,iBAAiB,CAAC,EAAE;YAC5C,IAAI,EAAE,QAAQ,CAAC,MAAM,CAAC,GAAG,EAAE;YAC3B,IAAI,EAAE,MAAM,CAAC,IAAI;SAClB,CAAC,CAAA;KACH,CAAC,CAAA;IAEF,KAAK,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,MAAM,EAAE,IAAI;QACzC,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAA;QACtB,IAAI,IAAI,IAAI,MAAM,CAAC,OAAO;YAAE,IAAI,GAAG,IAAI,CAAA;QAEvC,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,oBAAoB,CAAC,EAAE;YAC/C,IAAI;YACJ,MAAM,EAAE,QAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE;SAC7C,CAAC,CAAA;KACH,CAAC,CAAA;IAEF,KAAK,CAAC,UAAU,CAAC,cAAc,EAAE,CAAC,MAAM,EAAE,IAAI;QAC5C,IAAI,CAAC,MAAM,CAAC,OAAO;YAAE,OAAM;QAE3B,IAAI,MAAM,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAA;QAClD,IAAI,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC;YAAE,OAAM;QAEhC,IAAI,MAAM,GAAG,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;QACnE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;YAAE,OAAM;QAE5B,EAAE,CAAC,OAAO,CAAC,IAAI,CAAQ,WAAW,EAAE,EAAE,EAAE,KAAK;YAC3C,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,CAAA;SAC5B,CAAC,CAAA;QAEF,IAAI,QAAQ,GAAG,WAAW,EAAE,CAAA;QAC5B,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC,EAAE;YAC7C,MAAM,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,iBAAiB,EAAE;YACjE,MAAM,EAAE,MAAM,CAAC,IAAI;YACnB,MAAM,EAAE,MAAM,CAAC,IAAI,CAAC,iBAAiB,EAAE;YACvC,MAAM,EAAE,EAAE,GAAG,MAAM;YACnB,IAAI,EAAE,MAAM,CAAC,IAAI;SAClB,CAAC,CAAA;QACF,UAAU,CAAC,GAAG,MAAM,CAAC,IAAI,QAAQ,MAAM,CAAC,IAAI,kBAAkB,MAAM,EAAE,CAAC,CAAA;QAEvE,IAAI,QAAQ,CAAC,MAAM,CAAC,GAAG,QAAQ,CAAC,eAAe,CAAC,EAAE;YAChD,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,EAAE,EAAE,IAAI,EAAE,MAAM,CAAC,IAAI,EAAE,CAAC,CAAA;YACjE,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,MAAM,CAAC,IAAI,EAAE,CAAC,CAAA;YAClC,UAAU,CAAC,WAAW,MAAM,CAAC,IAAI,0BAA0B,CAAC,CAAA;SAC7D;KACF,CAAC,CAAA;IAEF,EAAE,CAAC,MAAM,GAAG,MAAM,QAAQ,CAAC,OAAO,CAAC,OAAO,IAAI,KAAK,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,CAAA;;IAG3E,MAAM,EAAE,GAAG,EAAE,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAAmC,CAAA;IACpE,IAAI,CAAC,EAAE;QAAE,OAAM;;IAGf,EAAE,CAAC,WAAW,CAAC,UAAU,EAAE,UAAU,CAAC,CAAA;IACtC,IAAI,WAAW,GAAG,EAAE,CAAC,MAAM,CAAC,UAAU,EAAE,UAAU,CAAC,CAAA;IACnD,WAAW,CAAC,SAAS,GAAG,YAAY,CAAA;IACpC,IAAI,WAAW,GAAG,EAAE,CAAC,MAAM,CAAC,UAAU,EAAE,UAAU,CAAC,CAAA;IACnD,WAAW,CAAC,SAAS,GAAG,YAAY,CAAA;IACpC,IAAI,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,KAAK,EAAE,UAAU,CAAC,CAAA;IACzC,MAAM,CAAC,SAAS,GAAG,OAAO,CAAA;;IAG1B,WAAW,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,KAAoB;;QAEjE,IAAI,KAAK,GAAG,KAAK,CAAC,aAAa,CAAC,OAAO,CAAQ,CAAA;QAC/C,IAAI,QAAQ,GAAG,WAAW,EAAE,CAAA;QAE5B,QAAQ,KAAK,CAAC,IAAI;YAChB,KAAK,UAAU;gBACb,KAAK,CAAC,OAAO,GAAG,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,KAAK,CAAA;gBAC1D,MAAK;YACP,KAAK,QAAQ;gBACX,KAAK,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;gBACpD,MAAK;YACP;gBACE,KAAK,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,EAAE,CAAA;SACxD;KACF,CAAC,CAAA;;IAGF,WAAW,CAAC,gBAAgB,CAAC,QAAQ,EAAE;QACrC,IAAI,QAAQ,GAAsB,EAAE,CAAA;QACpC,WAAW,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,KAAoB;YACjE,IAAI,KAAK,GAAG,KAAK,CAAC,aAAa,CAAC,OAAO,CAAQ,CAAA;YAC/C,QAAQ,KAAK,CAAC,IAAI;gBAChB,KAAK,UAAU;oBACb,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC,OAAO,CAAA;oBACjD,MAAK;gBACP,KAAK,QAAQ;oBACX,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAA;oBAChD,MAAK;gBACP;oBACE,QAAQ,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,KAAK,CAAC,KAAK,CAAA;aAClD;SACF,CAAC,CAAA;QACF,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAA;KACrC,CAAC,CAAA;;IAGF,MAAM,EAAE,CAAC,OAAO,CAAC,UAAU,IAAI;QAC7B,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAA;QACrC,EAAE,CAAC,WAAW,GAAG,IAAI,CACpB;QAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAiB,CAAC,WAAW,CAAC,EAAE,CAAC,CAAA;KAC7D,CAAC,CAAA;IAEF,UAAU,GAAG,CAAC,UAAU,IAAI;QAC1B,OAAO,CAAC,OAAe;YACrB,IAAI,CAAC,OAAO,CAAC,CAAA;YACb,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAA;YACrC,EAAE,CAAC,WAAW,GAAG,OAAO,CACvB;YAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAiB,CAAC,WAAW,CAAC,EAAE,CAAC,CAAA;SAC7D,CAAA;KACF,EAAE,UAAU,CAAC,CAEb;IAAC,MAAM,CAAC,aAAa,CAAC,GAAG,CAAiB,CAAC,gBAAgB,CAAC,OAAO,EAAE;QACpE,EAAE,CAAC,KAAK,CAAC,iEAAiE,EAAE;YAC1E,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE;YACnC,EAAE,IAAI,EAAE,QAAQ,EAAE;SACnB,EAAE,QAAQ;YACT,IAAI,QAAQ,IAAI,KAAK,EAAE;gBACrB,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,EAAE,CAAC,CACxB;gBAAC,MAAM,CAAC,aAAa,CAAC,IAAI,CAAiB,CAAC,SAAS,GAAG,EAAE,CAAA;aAC5D;SACF,CAAC,CAAA;KACH,CAAC,CAAA;IAEF,EAAE,CAAC,MAAM,GAAG,CAAC,UAAS,IAAI;QACxB,OAAO;YACL,IAAI,EAAE,CAAA;YACN,EAAE,CAAC,cAAc,CAAC,UAAU,CAAC,CAAA;SAC9B,CAAA;KACF,EAAE,EAAE,CAAC,MAAM,CAAC,CAAA;CACd,CAAC,CAAA;;;;"}