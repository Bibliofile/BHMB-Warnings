{"version":3,"file":"bundle.js","sources":["../src/index.ts"],"sourcesContent":["import { MessageBot, Player } from '@bhmb/bot'\r\nimport { UIExtensionExports } from '@bhmb/ui'\r\n\r\ninterface KeyedObject {\r\n  [key: string]: any\r\n}\r\n\r\ninterface Warns {\r\n  [key: string]: number\r\n}\r\n\r\nfunction mergeByType<T extends KeyedObject>(target: T, extra: Partial<T>): T {\r\n  Object.keys(extra).forEach(key => {\r\n    if (typeof extra[key] == typeof target[key]) {\r\n      target[key] = extra[key]\r\n    }\r\n  })\r\n  return target\r\n}\r\n\r\ninterface Settings {\r\n  'threshold-ban': number\r\n  'warn-kick': boolean\r\n  'response-warn': string\r\n  'response-warn-ban': string\r\n  'response-warnlevel': string\r\n  'response-set-warnings': string\r\n  'response-unwarn': string\r\n}\r\n\r\ninterface SettingsLabel extends HTMLLabelElement {\r\n  dataset: {\r\n    settingId: keyof Settings\r\n  }\r\n}\r\n\r\nimport commandsHtml from './commandsTab.html'\r\nimport settingsHtml from './settingsTab.html'\r\nimport logHtml from './logTab.html'\r\n\r\nconst warningsKey = 'warns'\r\nconst logKey = 'log'\r\nconst settingsKey = 'settings'\r\nconst commands = ['warn', 'unwarn', 'warnlevel', 'set-warnings']\r\n\r\nMessageBot.registerExtension('bibliofile/warnings', (ex, world) => {\r\n  const getWarnings = () => ex.storage.get<Warns>(warningsKey, {})\r\n  const getLog = () => ex.storage.get<string[]>(logKey, [])\r\n  const getSettings = () => mergeByType<Settings>({\r\n    'threshold-ban': 5,\r\n    'warn-kick': true,\r\n    'response-warn': '{{Name}}, you have been warned for breaking the rules. Please behave yourself. If warned {{left}} more time(s) you will be banned.',\r\n    'response-warn-ban': '{{Name}} has been banned after multiple warnings.',\r\n    'response-warnlevel': 'Warnings for {{Name}}: {{amount}}',\r\n    'response-set-warnings': '{{Name}} set {{Target}}\\'s warnings to {{amount}}.',\r\n    'response-unwarn': 'Warning removed from {{Name}}, {{Name}} now has {{left}} warnings.'\r\n  }, ex.storage.get<Partial<Settings>>(settingsKey, {}))\r\n\r\n  // Allow overrides\r\n  let logMessage = (message: string) => ex.storage.set('log', getLog().concat([message]))\r\n\r\n  const canWarn = (player: Player) => !player.isStaff\r\n  const getWarns = (player: Player) => getWarnings()[player.name] || 0\r\n\r\n  world.addCommand('warn', (player, args) => {\r\n    let target = world.getPlayer(args)\r\n    if (!canWarn(target) || !player.isStaff) return\r\n\r\n    let settings = getSettings()\r\n    logMessage(`${player.name} warned ${args}`)\r\n\r\n    ex.storage.with<Warns>(warningsKey, {}, warnings => {\r\n      warnings[target.name] = warnings[target.name]++ || 1\r\n    })\r\n    let warnings = getWarns(target)\r\n\r\n    // What message to send?\r\n    if (warnings > settings['threshold-ban']) {\r\n      ex.bot.send(settings['response-warn-ban'], { name: target.name })\r\n      ex.bot.send(`/ban ${target.name}`)\r\n      logMessage(`Banning ${target.name}. Exceeded ban threshold`)\r\n    } else {\r\n      ex.bot.send(settings['response-warn'], {\r\n        left: (settings['threshold-ban'] - warnings).toString(),\r\n        name: target.name\r\n      })\r\n\r\n      if (settings['warn-kick']) ex.bot.send(`/kick ${target.name}`)\r\n    }\r\n  })\r\n\r\n  world.addCommand('unwarn', (player, args) => {\r\n    let target = world.getPlayer(args)\r\n    if (!canWarn(target) || !player.isStaff) return\r\n\r\n    logMessage(`${player.name} unwarned ${target.name}`)\r\n    ex.storage.with<Warns>(warningsKey, {}, warns => {\r\n      warns[target.name] = warns[target.name] > 0 ? warns[target.name] - 1 : 0\r\n    })\r\n\r\n    ex.bot.send(getSettings()['response-unwarn'], {\r\n      left: getWarns(target) + '',\r\n      name: target.name\r\n    })\r\n  })\r\n\r\n  world.addCommand('warnlevel', (player, args) => {\r\n    let name = player.name\r\n    if (args && player.isStaff) name = args\r\n\r\n    ex.bot.send(getSettings()['response-warnlevel'], {\r\n      name,\r\n      amount: getWarns(world.getPlayer(name)) + ''\r\n    })\r\n  })\r\n\r\n  world.addCommand('set-warnings', (player, args) => {\r\n    if (!player.isAdmin) return\r\n\r\n    let amount = +args.substring(0, args.indexOf(' '))\r\n    if (Number.isNaN(amount)) return\r\n\r\n    let target = world.getPlayer(args.substring(args.indexOf(' ') + 1))\r\n    if (!canWarn(target)) return\r\n\r\n    ex.storage.with<Warns>(warningsKey, {}, warns => {\r\n      warns[target.name] = amount\r\n    })\r\n\r\n    let settings = getSettings()\r\n    ex.bot.send(settings['response-set-warnings'], {\r\n      Target: target.name[0] + target.name.slice(1).toLocaleLowerCase(),\r\n      TARGET: target.name,\r\n      target: target.name.toLocaleLowerCase(),\r\n      amount: '' + amount,\r\n      name: player.name\r\n    })\r\n    logMessage(`${player.name} set ${target.name}'s warnings to ${amount}`)\r\n\r\n    if (getWarns(target) > settings['threshold-ban']) {\r\n      ex.bot.send(settings['response-warn-ban'], { name: target.name })\r\n      ex.bot.send(`/ban ${target.name}`)\r\n      logMessage(`Banning ${target.name}. Exceeded ban threshold`)\r\n    }\r\n  })\r\n\r\n  ex.remove = () => commands.forEach(command => world.removeCommand(command))\r\n\r\n  // Browser only\r\n  const ui = ex.bot.getExports('ui') as UIExtensionExports | undefined\r\n  if (!ui) return\r\n\r\n  // Create tabs\r\n  ui.addTabGroup('Warnings', 'warnings')\r\n  let commandsTab = ui.addTab('Commands', 'warnings')\r\n  commandsTab.innerHTML = commandsHtml\r\n  let settingsTab = ui.addTab('Settings', 'warnings')\r\n  settingsTab.innerHTML = settingsHtml\r\n  let logTab = ui.addTab('Log', 'warnings')\r\n  logTab.innerHTML = logHtml\r\n\r\n  // Init settings\r\n  settingsTab.querySelectorAll('label').forEach((label: SettingsLabel) => {\r\n    // Just work... not sure how to type this.\r\n    let input = label.querySelector('input') as any\r\n    let settings = getSettings()\r\n\r\n    switch (input.type) {\r\n      case 'checkbox':\r\n        input.checked = settings[label.dataset.settingId] || false;\r\n        break;\r\n      case 'number':\r\n        input.value = settings[label.dataset.settingId] || 0;\r\n        break;\r\n      default:\r\n        input.value = settings[label.dataset.settingId] || '';\r\n    }\r\n  })\r\n\r\n  // Save on change\r\n  settingsTab.addEventListener('change', function () {\r\n    var settings: Partial<Settings> = {}\r\n    settingsTab.querySelectorAll('label').forEach((label: SettingsLabel) => {\r\n      var input = label.querySelector('input') as any\r\n      switch (input.type) {\r\n        case 'checkbox':\r\n          settings[label.dataset.settingId] = input.checked\r\n          break;\r\n        case 'number':\r\n          settings[label.dataset.settingId] = +input.value\r\n          break;\r\n        default:\r\n          settings[label.dataset.settingId] = input.value\r\n      }\r\n    })\r\n    ex.storage.set('settings', settings)\r\n  });\r\n\r\n  // Init log\r\n  getLog().forEach(function (line) {\r\n    var el = document.createElement('li')\r\n    el.textContent = line\r\n    ;(logTab.querySelector('ul') as HTMLElement).appendChild(el)\r\n  })\r\n\r\n  logMessage = (function (orig) {\r\n    return (message: string) => {\r\n      orig(message)\r\n      let el = document.createElement('li')\r\n      el.textContent = message\r\n      ;(logTab.querySelector('ul') as HTMLElement).appendChild(el)\r\n    }\r\n  })(logMessage)\r\n\r\n  ;(logTab.querySelector('a') as HTMLElement).addEventListener('click', () => {\r\n    ui.alert('Are you sure you want to clear the logs? This cannot be undone.', [\r\n      { text: 'Yes', style: 'is-danger' },\r\n      { text: 'Cancel' }\r\n    ], response => {\r\n      if (response == 'Yes') {\r\n        ex.storage.set('log', [])\r\n        ;(logTab.querySelector('ul') as HTMLElement).innerHTML = ''\r\n      }\r\n    })\r\n  })\r\n\r\n  ex.remove = (function(orig) {\r\n    return () => {\r\n      orig()\r\n      ui.removeTabGroup('warnings')\r\n    }\r\n  })(ex.remove)\r\n})\r\n"],"names":["MessageBot"],"mappings":"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"}